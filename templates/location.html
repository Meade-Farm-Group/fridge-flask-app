{% extends 'base.html' %}
{% block title %} Location Page {% endblock %} 
{% block content %}
{% from 'macros.html' import table, table2 %}

{% set rack_num = "{:02d}".format(rack_id| int)|string %}

{% if locdet["tableType"] == "2d" %}
	{% set columns = locdet["tableSize"][0] %}
	{% set loc_id = locdet["id"] %}
	{% set cell_location = locdet['id'] %}
{% else %}
	{% set columns = locdet["tableSize"][2] %}
	{% set loc_id = locdet["id"][0] + locdet["id"][-1] %}
	{% set cell_location = locdet['id']+'-'+rack_id %}
{% endif %}
<br/>
<a href="{{ url_for('home_page')}}" 
        class="btn btn-success btn-lg" tabindex="-1" role="button" aria-disabled="true"><i class="fas fa-angle-left"></i>&#8592;Back</a>

<h1>Location - {{ locdet["name"] }}</h1>
<br/>
{% if locdet['tableType'] == "3d" %}
<div class="dropdown">
	<button class="btn btn-success btn-lg dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
		Select a Rack
	</button>
	<ul class="dropdown-menu dropdown-large border" aria-labelledby="dropdownMenuButton1">
		{% for n in range(locdet["tableSize"][0]) %}
			<li><a class="dropdown-item border" href="{{ url_for('location_page', location_id=locdet['id'], rack_id = loop.index )}}">Rack {{ loop.index }}</a></li>
		{% endfor %}
	</ul>
</div>
<br/>
{% endif %}

{% set rack_num = "{:02d}".format(rack_id| int)|string %}

<!-- Text -->
<ul class="list-inline">
	<li class="list-inline-item">
		{% if rack_id != none %}
			<h2>Current Rack: {{ rack_num }} &emsp;</h2>
		{% endif %}
	</li>
	<li class="list-inline-item">
		<h4 class="text-muted">
			Last Updated: 
			<li class="list-inline-item">
				<div id="updatedTime"></div>
			</li>
		</h4>
	</li>
</ul>

<!-- Table -->
{{ table(rack_id, locdet, columns, loc_id, cell_location, rack_num, alphabet) }}

<h3>Legend:</h3>

<div class="container">
	<div class="row col-12" id="testDisplay">
	
	</div>
</div>

<meta id="my-data" data-loc="{{ loc_id }}" data-rack="{{ rack_num }}">

{% endblock %}

{% block extrajs %}
<script src="{{ url_for('static', filename='js/tableRefresh.js') }}"></script>
{% endblock %}



